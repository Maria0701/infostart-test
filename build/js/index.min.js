(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.formElements=this.form.elements,this.invalidities=[],this.invalidElt=null,this.handleEvent=this.handleEvent.bind(this),this.init()}var n,s;return n=e,(s=[{key:"init",value:function(){this.setEventListeners()}},{key:"setEventListeners",value:function(){var e=this;t(this.formElements).forEach((function(t){t.addEventListener("blur",e.handleEvent),t.addEventListener("focus",e.handleEvent)}))}},{key:"handleEvent",value:function(t){var e=t.target.closest("input");if(e)switch(t.type){case"blur":return this.checkValidity(e);case"focus":return this.clearMistakes(e)}}},{key:"checkField",value:function(t){if(t.required){var e=t.validity;e.valueMissing||"email"!==t.name||this.checkEmail(t)||this.setCustomValidity("Почта должна содержать @"),e.valueMissing||"tel"!==t.name||this.checkPhone(t)||this.setCustomValidity("Введите телефон в формате 8 (xxх)-xxxx-xx-xx"),e.valueMissing&&this.setCustomValidity("Поле обязательно для заполнения"),e.patternMismatch&&this.setCustomValidity("Неправильный формат ввода"),e.typeMismatch&&this.setCustomValidity("Неправильный формат ввода")}}},{key:"checkEmail",value:function(t){return-1!==t.value.indexOf("@")}},{key:"checkPhone",value:function(t){return t.value.match(/^\(?([0-9]{1})[-. ]?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{2})[-. ]?([0-9]{2})$/)}},{key:"setCustomValidity",value:function(t){this.invalidities.push(t)}},{key:"getErrors",value:function(){return this.invalidities.join(",")}},{key:"checkValidity",value:function(t){this.checkField(t),this.invalidities.length&&(t.classList.add("invalid"),this.removeElt(),this.createElt(this.getErrors(),t),this.invalidities=[])}},{key:"clearMistakes",value:function(t){t.classList.contains("invalid")&&(t.classList.remove("invalid"),t.placeholder="",this.invalidities=[])}},{key:"sendForm",value:function(t){return this.removeEventListeners(),!0}},{key:"removeEventListeners",value:function(){var e=this;t(this.formElements).forEach((function(t){t.removeEventListener("blur",e.handleEvent),t.removeEventListener("focus",e.handleEvent)}))}},{key:"createElt",value:function(t,e){this.invalidElt=document.createElement("div"),this.invalidElt.classList.add("form__invalid"),this.invalidElt.textContent=t,e.closest("label").append(this.invalidElt)}},{key:"removeElt",value:function(){this.invalidElt&&(this.invalidElt.closest("label").removeChild(this.invalidElt),this.invalidElt=null)}}])&&i(n.prototype,s),Object.defineProperty(n,"prototype",{writable:!1}),e}();function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;a(this,t),this.class="slider",this.container=e,this.containerWrapper=this.container.querySelector(".".concat(this.class,"__wrapper")),this.slidesWrapper=this.container.querySelector(".".concat(this.class,"__list")),this.slides=this.container.querySelectorAll(".".concat(this.class,"__item")),this.arrowLeft=this.container.querySelector(".".concat(this.class,"__arrow--left")),this.arrowRight=this.container.querySelector(".".concat(this.class,"__arrow--right")),this.dotItems=this.container.querySelectorAll(".".concat(this.class,"__dot")),this.animate=!0,this.currentIndex=0,this.startX=0,this.delay=n,this.autoplay=i,this.numberOfSlides=this.isInViewport(),this.timeout=null,this.init()}var e,i;return e=t,(i=[{key:"init",value:function(){if(this.autoplay&&this.autoplaySlider(),this.numberOfSlides>=this.slides.length)return this.arrowLeft.style.display="none",this.arrowRight.style.display="none",this.autoplay=!1,void this.container.classList.add("full");this.dotItems.length||(this.createDots(this.slides.length),this.dotItems=this.container.querySelectorAll(".".concat(this.class,"__dot-item"))),this.slides[0].classList.add("".concat(this.class,"__item--active")),this.dotItems.length&&s(this.dotItems)[0].classList.add("".concat(this.class,"__dot-item--active")),this.setEventListeners()}},{key:"autoplaySlider",value:function(){var t=this;this.timeout=setTimeout((function(){return t.moveToNext()}),this.delay)}},{key:"setEventListeners",value:function(){var t=this;this.arrowLeft.addEventListener("click",(function(e){e.preventDefault(),t.moveToPrev()})),this.arrowRight.addEventListener("click",(function(e){e.preventDefault(),t.moveToNext()})),this.dotItems.length&&s(this.dotItems).forEach((function(e,i){e.addEventListener("click",(function(){t.currentIndex=i,t.moveSlide()}))})),this.slidesWrapper.addEventListener("touchstart",(function(e){t.startX=(e.touches||e.originalEvent.touches)[0].clientX}),{passive:!0}),this.slidesWrapper.addEventListener("touchmove",(function(e){if(t.startX){var i=t.startX-(e.touches||e.originalEvent.touches)[0].clientX;i>20?(t.moveToNext(),t.startX=null):i<-20&&(t.moveToPrev(),t.startX=null)}}),{passive:!0})}},{key:"moveToNext",value:function(){this.animate&&(this.animate=!1,this.currentIndex+=1,this.currentIndex>this.slides.length-1&&(this.currentIndex=0),this.moveSlide())}},{key:"moveToPrev",value:function(){this.animate&&(this.animate=!1,this.currentIndex-=1,this.currentIndex<0&&(this.currentIndex=this.slides.length-1),this.moveSlide())}},{key:"moveSlide",value:function(){clearTimeout(this.timeout);var t=this.slides[this.currentIndex].getBoundingClientRect().left-this.slidesWrapper.getBoundingClientRect().left;this.changeActiveSlide(this.currentIndex),this.slidesWrapper.style.transform="translate3d(-".concat(t,"px, 0, 0)"),this.dotItems.length&&this.dotMove(this.currentIndex),this.animate=!0,this.autoplay&&this.autoplaySlider()}},{key:"changeActiveSlide",value:function(t){var e=this;s(this.slides).find((function(t){return t.classList.contains("".concat(e.class,"__item--active"))})).classList.remove("".concat(this.class,"__item--active")),this.slides[t].classList.add("".concat(this.class,"__item--active"))}},{key:"dotMove",value:function(t){s(this.dotItems).forEach((function(t){t.classList.contains("active")&&t.classList.remove("active")})),s(this.dotItems)[t].classList.add("active")}},{key:"isInViewport",value:function(){var t=this.containerWrapper.getBoundingClientRect().x,e=this.containerWrapper.getBoundingClientRect().width,i=0;return this.slides.forEach((function(n){var s=n.getBoundingClientRect().x;s<t+e&&s>=t&&i++})),i}},{key:"createDots",value:function(t){var e=this.createElt("div","slider__dots");e.innerHTML=Array(t).fill('<button class="slider__dot-item btn" role="button"></button>').join(""),this.container.append(e)}},{key:"createElt",value:function(t,e){var i=document.createElement(t);return i.classList.add(e),i}}])&&o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();try{var c=document.querySelector(".header__toggler"),u=document.querySelector(".header__menu-wrapper");c&&u&&function(t,e,i,n){var s=document.querySelector(".header"),r=document.querySelector(".overlay"),a=t;function o(t){e.contains(t.target)||l()}function l(){s.classList.remove("opened"),a.removeEventListener("click",l),r.removeEventListener("click",o),t.addEventListener("click",c),r.classList.remove("overlay--active")}function c(){var e;(e=document.querySelector(".opened"))&&e!==s&&e.classList.remove("opened"),s.classList.add("opened"),t.removeEventListener("click",c),a.addEventListener("click",l),r.addEventListener("click",o),r.classList.add("overlay--active")}t.addEventListener("click",c)}(c,u)}catch(t){console.log(t)}try{var h=document.querySelectorAll(".slider");h.length>0&&h.forEach((function(t){return new l(t)}))}catch(t){console.log(t)}try{var d=document.querySelectorAll(".form");d.length>0&&d.forEach((function(t){return new n(t)}))}catch(t){console.log(t)}})();